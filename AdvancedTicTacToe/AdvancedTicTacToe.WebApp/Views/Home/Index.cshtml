@{
    ViewBag.Title = "Home Page";
}

@section scripts
{
    @Scripts.Render("~/bundles/angularjs")
    <!--Reference the SignalR library. -->
    @Scripts.Render("~/signalr/library")
    <!--Reference the autogenerated SignalR hub script. -->
    @Scripts.Render("~/signalr/hubs")

    <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js"></script>
    @Scripts.Render("~/bundles/thegame")
    <script type="text/javascript">
        $(document).ready(function () {

            InitializeGame();

            $.connection.hub.logging = true;

            angular.bootstrap($("#mainContainer"), ['advancedTicTacToe']);
        });


    </script>

}

<div id="mainContainer" class="container body-content">

    <div class="row">
        <div ng-controller="SingleGameController as singleGameCtrl" class="col-md-9">
            <p></p>
            <div class="game_players_header">
                <div class="player1_header">
                    <span class="glyphicon glyphicon-remove font_icon_big"></span>
                    {{singleGameCtrl.player1Name}}
                </div>
                <div class="player2_header">
                    {{singleGameCtrl.player2Name}}
                    <span class="glyphicon glyphicon-unchecked font_icon_big player2_color"></span>
                </div>
            </div>
            <div class="header" ng-class="{p1_active_content: singleGameCtrl.activePlayer == 1, p2_active_content: singleGameCtrl.activePlayer == 2}">
                <div class="main_container">
                    <div ng-repeat="bigCell in singleGameCtrl.bigCells" class="big_cell" ng-class="{active: bigCell.isActive}">
                        <div ng-repeat="smallCell in bigCell.cells" class="small_cell" ng-click="singleGameCtrl.cellClicked(smallCell)" ng-class="{p1: smallCell.playerSelection == 1, p2: smallCell.playerSelection == 2}">
                            <span class="glyphicon" ng-class="smallCell.playerIcon"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3" ng-controller="RightPanelController as rightPanelCtrl">

            <h2>Friends</h2>
            <div class="list-group" style="max-height: 300px; overflow-y: auto;">
                <a ng-repeat="user in rightPanelCtrl.onlineUsers" class="list-group-item">
                    <span class="glyphicon glyphicon-user"></span> {{user.userName}}
                    <span class="label label-warning" ng-show="user.isPlaying">playing</span>
                    <span ng-click="rightPanelCtrl.playMatch(user)" class="label label-success" ng-hide="user.isPlaying || user.isMe">play</span>
                </a>
            </div>


            @*@for (int i = 0; i < 106; i++)
                {

                    <li class="list-group-item">
                        <span class="glyphicon glyphicon-user"></span> Friend @i
                        @if (i == 2)
                        {
                            <span class="label label-success">playing</span>
                        }
                    </li>
                }*@

            <li class="list-group-item" style="margin-top: -21px;">
                <input type="text" class="form-control" placeholder="Search friends" aria-describedby="basic-addon1" />
            </li>

            <h2>Online Stats</h2>
            <ul class="list-group">
                <li class="list-group-item">214 match played so far...</li>
                <li class="list-group-item">239 online users</li>
            </ul>
        </div>
    </div>
</div>